# Budgie Web Service Development Scripts

## Quick Start

### Initial Setup
```bash
# Clean environment and setup everything
bash dev-scripts/setup-webservice-dev.sh
```

### Daily Development
```bash
# Start development servers (frontend + backend)
npm run dev

# Test database connection
npm run db:test

# Reset everything (clean + setup)
npm run db:reset
```

### Clean Slate
```bash
# Remove all development artifacts
bash dev-scripts/cleanup-webservice-dev.sh

# Then setup again
bash dev-scripts/setup-webservice-dev.sh
```

## What Gets Created

### Project Structure
```
budgie/
├── frontend/           # SvelteKit app (http://localhost:5173)
├── backend/           # Node.js API (http://localhost:3001)
├── database/          # SQL setup and migrations
├── scripts/           # Development helper scripts
├── .env              # Backend environment variables
└── dev-scripts/      # Setup and cleanup scripts
```

### Database
- **Database:** `budgie_dev`
- **User:** `budgie_user`
- **Password:** `budgie_dev_password`
- **Tables:** users, ledgers, transactions, sessions

### Development Servers
- **Frontend:** http://localhost:5173 (SvelteKit/Vite)
- **Backend API:** http://localhost:3001 (Express)
- **Database:** localhost:5432 (PostgreSQL)

## Scripts

### setup-webservice-dev.sh
- Installs all dependencies
- Creates SvelteKit frontend
- Sets up PostgreSQL database
- Creates development environment files
- Configures project structure

### cleanup-webservice-dev.sh
- Removes all node_modules
- Deletes frontend directory
- Drops development database
- Cleans environment files
- Restores original project state

## Dependencies Added

### Backend
- `sequelize` - Database ORM
- `pg` - PostgreSQL driver
- `bcrypt` - Password hashing
- `express-session` - Session management
- `express-validator` - Input validation
- `cors` - Cross-origin requests
- `dotenv` - Environment variables

### Frontend
- `@sveltejs/kit` - SvelteKit framework
- `tailwindcss` - Utility-first CSS
- `typescript` - Type safety
- `vite` - Build tool

### Development
- `nodemon` - Auto-restart backend
- `concurrently` - Run multiple commands
- Various TypeScript definitions

## Environment Variables

### Backend (.env)
```
DB_HOST=localhost
DB_PORT=5432
DB_NAME=budgie_dev
DB_USER=budgie_user
DB_PASSWORD=budgie_dev_password
SESSION_SECRET=<auto-generated>
NODE_ENV=development
PORT=3001
FRONTEND_URL=http://localhost:5173
```

### Frontend (frontend/.env)
```
VITE_API_URL=http://localhost:3001/api
VITE_API_BASE_URL=http://localhost:3001
```

## Development Workflow

1. **Setup once:** `bash dev-scripts/setup-webservice-dev.sh`
2. **Daily development:** `npm run dev`
3. **Clean restart:** `npm run db:reset`
4. **Full cleanup:** `bash dev-scripts/cleanup-webservice-dev.sh`

The setup script is idempotent - safe to run multiple times.